<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Handling multiple assets - Breez SDK - Liquid</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../styles.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Breez SDK - Liquid</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/breez/breez-sdk-liquid-docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/breez/breez-sdk-liquid-docs/edit/main/src/guide/assets.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="handling-multiple-assets"><a class="header" href="#handling-multiple-assets">Handling multiple assets</a></h1>
<p>The Liquid sidechain can also be used to send and receive other assets registered on the Liquid Network. Using the SDK you can send and receive these assets by using a Liquid payment with an additional asset ID. By default the SDK includes the metadata for <a href="#default-asset-metadata">L-BTC and Tether USD</a>. To include addition asset metadata, see <a href="#adding-asset-metadata">Adding asset metadata</a>.</p>
<h2 id="adding-asset-metadata">
    <a class="header" href="#adding-asset-metadata">Adding asset metadata</a>
    <a class="tag" target="_blank" href="https://breez.github.io/breez-sdk-liquid/breez_sdk_liquid/model/struct.Config.html#structfield.asset_metadata">API docs</a>
</h2>
<p>You can add addition asset metadata to the SDK when you configure it on connect. In the example below we will add the <a href="https://assets.blockstream.info/18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec.json">PEGx EUR</a> asset. Once the asset metadata is added, it can be used as an asset to send and receive.
You can find the asset metadata for other assets in the Mainnet <a href="https://assets.blockstream.info/">Liquid Asset Registry</a> (<a href="https://assets-testnet.blockstream.info/">Testnet</a>).</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">// Create the default config
let mut config = LiquidSdk::default_config(
    LiquidNetwork::Mainnet,
    Some("&lt;your-Breez-API-key&gt;".to_string()),
)?;

// Configure asset metadata. Setting the optional fiat ID will enable
// paying fees using the asset (if available).
config.asset_metadata = Some(vec![
    AssetMetadata {
        asset_id: "18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec".to_string(),
        name: "PEGx EUR".to_string(),
        ticker: "EURx".to_string(),
        precision: 8,
        fiat_id: Some("EUR".to_string()),
    },
]);</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">// Create the default config
var config = try defaultConfig(network: LiquidNetwork.mainnet, breezApiKey: "&lt;your-Breez-API-key&gt;")

// Configure asset metadata. Setting the optional fiat ID will enable
// paying fees using the asset (if available).
config.assetMetadata = [
    AssetMetadata(
        assetId: "18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec",
        name: "PEGx EUR",
        ticker: "EURx",
        precision: 8,
        fiatId: "EUR"
    )
]
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">// Create the default config
val config : Config = defaultConfig(LiquidNetwork.MAINNET, "&lt;your Breez API key&gt;")

// Configure asset metadata. Setting the optional fiat ID will enable
// paying fees using the asset (if available).
config.assetMetadata = listOf(
    AssetMetadata(
        assetId = "18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec",
        name = "PEGx EUR",
        ticker = "EURx",
        precision = 8.toUByte(),
        fiatId = "EUR"
    )
)
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript">// Create the default config
const config = defaultConfig('mainnet', '&lt;your-Breez-API-key&gt;')

// Configure asset metadata
config.assetMetadata = [
  {
    assetId: '18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec',
    name: 'PEGx EUR',
    ticker: 'EURx',
    precision: 8
  }
]
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">// Create the default config
const config = await defaultConfig(
  LiquidNetwork.MAINNET,
  '&lt;your-Breez-API-key&gt;'
)

// Configure asset metadata. Setting the optional fiat ID will enable
// paying fees using the asset (if available).
config.assetMetadata = [
  {
    assetId: '18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec',
    name: 'PEGx EUR',
    ticker: 'EURx',
    precision: 8,
    fiatId: 'EUR'
  }
]
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">// Create the default config
Config config = defaultConfig(network: LiquidNetwork.mainnet, breezApiKey: "&lt;your-Breez-API-key&gt;");

// Configure asset metadata. Setting the optional fiat ID will enable
// paying fees using the asset (if available).
config = config.copyWith(
  assetMetadata: [
    AssetMetadata(
      assetId: "18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec",
      name: "PEGx EUR",
      ticker: "EURx",
      precision: 8,
      fiatId: "EUR",
    ),
  ],
);
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore"># Create the default config
config = default_config(
    network=LiquidNetwork.MAINNET,
    breez_api_key="&lt;your-Breez-API-key&gt;"
)

# Configure asset metadata. Setting the optional fiat ID will enable
# paying fees using the asset (if available).
config.asset_metadata = [
    AssetMetadata(
        asset_id="18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec",
        name="PEGx EUR",
        ticker="EURx",
        precision=8,
        fiat_id="EUR"
    )
]
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">// Create the default config
breezApiKey := "&lt;your-Breez-API-key&gt;"
config, err := breez_sdk_liquid.DefaultConfig(breez_sdk_liquid.LiquidNetworkMainnet, &amp;breezApiKey)
if err != nil {
    return err
}

// Configure asset metadata. Setting the optional fiat ID will enable
// paying fees using the asset (if available).
fiatId := "EUR"
assetMetadata := []breez_sdk_liquid.AssetMetadata{
    {
        AssetId:   "18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec",
        Name:      "PEGx EUR",
        Ticker:    "EURx",
        Precision: 8,
        FiatId:    &amp;fiatId,
    },
}
config.AssetMetadata = &amp;assetMetadata
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">// Create the default config
var config = BreezSdkLiquidMethods.DefaultConfig(
    LiquidNetwork.Mainnet,
    "&lt;your-Breez-API-key&gt;"
) with
{
    // Configure asset metadata. Setting the optional fiat ID will enable
    // paying fees using the asset (if available).
    assetMetadata = new List&lt;AssetMetadata&gt;
    {
        new(
            assetId: "18729918ab4bca843656f08d4dd877bed6641fbd596a0a963abbf199cfeb3cec",
            name: "PEGx EUR",
            ticker: "EURx",
            precision: 8,
            fiatId: "EUR"
        )
    }
};
</code></pre>
</section>
</custom-tabs>
<h3 id="default-asset-metadata"><a class="header" href="#default-asset-metadata">Default asset metadata</a></h3>
<h4 id="mainnet"><a class="header" href="#mainnet">Mainnet</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Ticker</th><th>Asset ID</th><th>Precision</th></tr></thead><tbody>
<tr><td>Bitcoin</td><td>BTC</td><td>6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d</td><td>8</td></tr>
<tr><td>Tether USD</td><td>USDt</td><td>ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2</td><td>8</td></tr>
</tbody></table>
</div>
<h4 id="testnet"><a class="header" href="#testnet">Testnet</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Ticker</th><th>Asset ID</th><th>Precision</th></tr></thead><tbody>
<tr><td>Testnet Bitcoin</td><td>BTC</td><td>144c654344aa716d6f3abcc1ca90e5641e4e2a7f633bc09fe3baf64585819a49</td><td>8</td></tr>
<tr><td>Testnet Tether USD</td><td>USDt</td><td>b612eb46313a2cd6ebabd8b7a8eed5696e29898b87a43bff41c94f51acef9d73</td><td>8</td></tr>
</tbody></table>
</div><h2 id="fetching-the-asset-balances">
    <a class="header" href="#fetching-the-asset-balances">Fetching the asset balances</a>
    <a class="tag" target="_blank" href="https://breez.github.io/breez-sdk-liquid/breez_sdk_liquid/sdk/struct.LiquidSdk.html#method.get_info">API docs</a>
</h2>
<p>Once connected, the asset balances can be retreived.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">let info = sdk.get_info().await?;
let asset_balances = info.wallet_info.asset_balances;</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">if let info = try? sdk.getInfo() {
    let assetBalances = info.walletInfo.assetBalances
    
    print(assetBalances)
}
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">try {
    val info = sdk.getInfo()
    val assetBalances = info?.walletInfo?.assetBalances
} catch (e: Exception) {
    // handle error
}
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript">const info = await sdk.getInfo()
const assetBalances = info.walletInfo.assetBalances
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">const info = await getInfo()
const assetBalances = info.walletInfo.assetBalances
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">GetInfoResponse? info = await breezSDKLiquid.instance!.getInfo();
List&lt;AssetBalance&gt; assetBalances = info.walletInfo.assetBalances;
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">try:
    info = sdk.get_info()
    asset_balances = info.wallet_info.asset_balances
except Exception as error:
    logging.error(error)
    raise
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">if info, err := sdk.GetInfo(); err == nil {
    assetBalances := info.WalletInfo.AssetBalances
    log.Printf("Asset balances: %#v", assetBalances)
}
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">try
{
    var info = sdk.GetInfo();
    var assetBalances = info?.walletInfo?.assetBalances;
}
catch (Exception)
{
    // Handle error
}
</code></pre>
</section>
</custom-tabs>
<h2 id="receiving-a-non-bitcoin-asset">
    <a class="header" href="#receiving-a-non-bitcoin-asset">Receiving a non-Bitcoin asset</a>
    <a class="tag" target="_blank" href="https://breez.github.io/breez-sdk-liquid/breez_sdk_liquid/sdk/struct.LiquidSdk.html#method.prepare_receive_payment">API docs</a>
</h2>
<p>When receiving an asset via Liquid, we can generate a BIP21 URI with information regarding the payment of a specific asset. The amount to receive is optional and omitting it will result in an amountless BIP21 URI.</p>
<p>In the example below we are using the <a href="https://assets.blockstream.info/ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2.json">Mainnet Tether USD</a> asset.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">// Create a Liquid BIP21 URI/address to receive an asset payment to.
// Note: Not setting the amount will generate an amountless BIP21 URI.
let usdt_asset_id =
    "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2".to_string();
let optional_amount = Some(ReceiveAmount::Asset {
    asset_id: usdt_asset_id,
    payer_amount: Some(1.50),
});
let prepare_response = sdk
    .prepare_receive_payment(&amp;PrepareReceiveRequest {
        payment_method: PaymentMethod::LiquidAddress,
        amount: optional_amount,
    })
    .await?;

// If the fees are acceptable, continue to create the Receive Payment
let receive_fees_sat = prepare_response.fees_sat;
info!("Fees: {} sats", receive_fees_sat);</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">// Create a Liquid BIP21 URI/address to receive an asset payment to.
// Note: Not setting the amount will generate an amountless BIP21 URI.
let usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
let optionalAmount = ReceiveAmount.asset(assetId: usdtAssetId, payerAmount: 1.50)
let prepareResponse = try? sdk
    .prepareReceivePayment(req: PrepareReceiveRequest(
        paymentMethod: PaymentMethod.liquidAddress,
        amount: optionalAmount
    ))

// If the fees are acceptable, continue to create the Receive Payment
let receiveFeesSat = prepareResponse!.feesSat
print("Fees: \(receiveFeesSat) sats")
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">try {
    // Create a Liquid BIP21 URI/address to receive an asset payment to.
    // Note: Not setting the amount will generate an amountless BIP21 URI.
    val usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    val optionalAmount = ReceiveAmount.Asset(usdtAssetId, 1.50)
    val prepareRequest = PrepareReceiveRequest(PaymentMethod.LIQUID_ADDRESS, optionalAmount)
    val prepareResponse = sdk.prepareReceivePayment(prepareRequest)

    // If the fees are acceptable, continue to create the Receive Payment
    val receiveFeesSat = prepareResponse.feesSat;
    // Log.v("Breez", "Fees: ${receiveFeesSat} sats")
} catch (e: Exception) {
    // handle error
}
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript">
// Create a Liquid BIP21 URI/address to receive an asset payment to.
// Note: Not setting the amount will generate an amountless BIP21 URI.
const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
const optionalAmount: ReceiveAmount = {
  type: 'asset',
  assetId: usdtAssetId,
  payerAmount: 1.5
}

const prepareResponse = await sdk.prepareReceivePayment({
  paymentMethod: 'liquidAddress',
  amount: optionalAmount
})

// If the fees are acceptable, continue to create the Receive Payment
const receiveFeesSat = prepareResponse.feesSat
console.log(`Fees: ${receiveFeesSat} sats`)
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">
// Create a Liquid BIP21 URI/address to receive an asset payment to.
// Note: Not setting the amount will generate an amountless BIP21 URI.
const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
const optionalAmount: ReceiveAmount = {
  type: ReceiveAmountVariant.ASSET,
  assetId: usdtAssetId,
  payerAmount: 1.50
}

const prepareResponse = await prepareReceivePayment({
  paymentMethod: PaymentMethod.LIQUID_ADDRESS,
  amount: optionalAmount
})

// If the fees are acceptable, continue to create the Receive Payment
const receiveFeesSat = prepareResponse.feesSat
console.log(`Fees: ${receiveFeesSat} sats`)
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">// Create a Liquid BIP21 URI/address to receive an asset payment to.
// Note: Not setting the amount will generate an amountless BIP21 URI.
String usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
ReceiveAmount_Asset optionalAmount = ReceiveAmount_Asset(assetId: usdtAssetId, payerAmount: 1.50);
PrepareReceiveRequest prepareReceiveRequest = PrepareReceiveRequest(
  paymentMethod: PaymentMethod.liquidAddress,
  amount: optionalAmount,
);

PrepareReceiveResponse prepareResponse = await breezSDKLiquid.instance!.prepareReceivePayment(
  req: prepareReceiveRequest,
);

// If the fees are acceptable, continue to create the Receive Payment
BigInt receiveFeesSat = prepareResponse.feesSat;
print("Fees: $receiveFeesSat sats");
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">try:
    # Create a Liquid BIP21 URI/address to receive an asset payment to.
    # Note: Not setting the amount will generate an amountless BIP21 URI.
    usdt_asset_id = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    optional_amount = ReceiveAmount.ASSET(usdt_asset_id, 1.50)
    prepare_request = PrepareReceiveRequest(
        payment_method=PaymentMethod.LIQUID_ADDRESS,
        amount=optional_amount
    )
    prepare_response = sdk.prepare_receive_payment(prepare_request)

    # If the fees are acceptable, continue to create the Receive Payment
    receive_fees_sat = prepare_response.fees_sat
    logging.debug(f"Fees: {receive_fees_sat} sats")
    return prepare_response
except Exception as error:
    logging.error(error)
    raise
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">// Create a Liquid BIP21 URI/address to receive an asset payment to.
// Note: Not setting the amount will generate an amountless BIP21 URI.
usdtAssetId := "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
payerAmount := float64(1.50)
var optionalAmount breez_sdk_liquid.ReceiveAmount = breez_sdk_liquid.ReceiveAmountAsset{
    AssetId:     usdtAssetId,
    PayerAmount: &amp;payerAmount,
}
prepareRequest := breez_sdk_liquid.PrepareReceiveRequest{
    PaymentMethod: breez_sdk_liquid.PaymentMethodLiquidAddress,
    Amount:        &amp;optionalAmount,
}
if prepareResponse, err := sdk.PrepareReceivePayment(prepareRequest); err == nil {
    // If the fees are acceptable, continue to create the Receive Payment
    receiveFeesSat := prepareResponse.FeesSat
    log.Printf("Fees: %v sats", receiveFeesSat)
}
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">try
{
    // Create a Liquid BIP21 URI/address to receive an asset payment to.
    // Note: Not setting the amount will generate an amountless BIP21 URI.
    var usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
    var optionalAmount = new ReceiveAmount.Asset(usdtAssetId, 1.50);
    var prepareRequest = new PrepareReceiveRequest(PaymentMethod.LiquidAddress, optionalAmount);
    var prepareResponse = sdk.PrepareReceivePayment(prepareRequest);

    // If the fees are acceptable, continue to create the Receive Payment
    var receiveFeesSat = prepareResponse.feesSat;
    Console.WriteLine($"Fees: {receiveFeesSat} sats");
}
catch (Exception)
{
    // Handle error
}
</code></pre>
</section>
</custom-tabs>
<br/>
<h2 id="sending-a-non-bitcoin-asset">
    <a class="header" href="#sending-a-non-bitcoin-asset">Sending a non-Bitcoin asset</a>
    <a class="tag" target="_blank" href="https://breez.github.io/breez-sdk-liquid/breez_sdk_liquid/sdk/struct.LiquidSdk.html#method.prepare_send_payment">API docs</a>
</h2>
<p>When sending an asset via Liquid, a BIP21 URI or Liquid address can be used as the destination. If a Liquid address is used, the optional prepare request amount <strong>must</strong> be set. If a BIP21 URI is used, either the BIP21 URI amount or optional prepare request amount <strong>must</strong> be set. When both amounts are set, the SDK will prioritize the <strong>request amount</strong> over the BIP21 amount.</p>
<p>It is also possible to execute the payment even when you do not own the receiver asset by manually providing the asset you intend to pay with via the <code>from_asset</code> field. This will instruct the SDK to swap your funds (if possible) for the target in-flight asset for that payment. Please note that the asset must be present in the SDK's <a href="#adding-asset-metadata">Asset Metadata</a> in order for the payment to succeed. For further information on how this works and which assets are supported, check out the <a href="https://sideswap.io/guides/">SideSwap guide</a>.</p>
<p>In the example below we are using the <a href="https://assets.blockstream.info/ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2.json">Mainnet Tether USD</a> asset.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">// Set the Liquid BIP21 or Liquid address you wish to pay
let destination = "&lt;Liquid BIP21 or address&gt;".to_string();
// If the destination is an address or an amountless BIP21 URI,
// you must specify an asset amount
let usdt_asset_id =
    "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2".to_string();
let optional_amount = Some(PayAmount::Asset {
    to_asset: usdt_asset_id,
    from_asset: None,
    receiver_amount: 1.50,
    estimate_asset_fees: Some(false),
});
let prepare_response = sdk
    .prepare_send_payment(&amp;PrepareSendRequest {
        destination,
        amount: optional_amount,
    })
    .await?;

// If the fees are acceptable, continue to create the Send Payment
let send_fees_sat = prepare_response.fees_sat;
info!("Fees: {:?} sats", send_fees_sat);</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">// Set the Liquid BIP21 or Liquid address you wish to pay
let destination = "&lt;Liquid BIP21 or address&gt;"
// If the destination is an address or an amountless BIP21 URI,
// you must specify an asset amount
let usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
let optionalAmount = PayAmount.asset(
    toAsset: usdtAssetId,
    receiverAmount: 1.50,
    estimateAssetFees: false,
    fromAsset: Optional.none
)
let prepareResponse = try? sdk
    .prepareSendPayment(req: PrepareSendRequest (
        destination: destination,
        amount: optionalAmount
    ))

// If the fees are acceptable, continue to create the Send Payment
let sendFeesSat = prepareResponse!.feesSat
print("Fees: \(sendFeesSat) sats")
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">// Set the Liquid BIP21 or Liquid address you wish to pay
val destination = "&lt;Liquid BIP21 or address&gt;"
try {
    // Create a Liquid BIP21 URI/address to receive an asset payment to.
    // Note: Not setting the amount will generate an amountless BIP21 URI.
    val usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    val optionalAmount = PayAmount.Asset(usdtAssetId, 1.50, false, null)
    val prepareResponse = sdk.prepareSendPayment(PrepareSendRequest(destination, optionalAmount))

    // If the fees are acceptable, continue to create the Send Payment
    val sendFeesSat = prepareResponse.feesSat;
    // Log.v("Breez", "Fees: ${sendFeesSat} sats")
} catch (e: Exception) {
    // handle error
}
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript">// Set the Liquid BIP21 or Liquid address you wish to pay
const destination = '&lt;Liquid BIP21 or address&gt;'
// If the destination is an address or an amountless BIP21 URI,
// you must specify an asset amount

const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
const optionalAmount: PayAmount = {
  type: 'asset',
  toAsset: usdtAssetId,
  receiverAmount: 1.5,
  estimateAssetFees: false
}

const prepareResponse = await sdk.prepareSendPayment({
  destination,
  amount: optionalAmount
})

// If the fees are acceptable, continue to create the Send Payment
const sendFeesSat = prepareResponse.feesSat
console.log(`Fees: ${sendFeesSat} sats`)
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">// Set the Liquid BIP21 or Liquid address you wish to pay
const destination = '&lt;Liquid BIP21 or address&gt;'
// If the destination is an address or an amountless BIP21 URI,
// you must specify an asset amount

const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
const optionalAmount: PayAmount = {
  type: PayAmountVariant.ASSET,
  toAsset: usdtAssetId,
  receiverAmount: 1.50,
  estimateAssetFees: false
}

const prepareResponse = await prepareSendPayment({
  destination,
  amount: optionalAmount
})

// If the fees are acceptable, continue to create the Send Payment
const sendFeesSat = prepareResponse.feesSat
console.log(`Fees: ${sendFeesSat} sats`)
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">// Set the Liquid BIP21 or Liquid address you wish to pay
String destination = "&lt;Liquid BIP21 or address&gt;";
// If the destination is an address or an amountless BIP21 URI,
// you must specify an asset amount
String usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
PayAmount_Asset optionalAmount = PayAmount_Asset(
  toAsset: usdtAssetId,
  receiverAmount: 1.50,
  estimateAssetFees: false,
  fromAsset: null,
);
PrepareSendRequest prepareSendRequest = PrepareSendRequest(
  destination: destination,
  amount: optionalAmount,
);

PrepareSendResponse prepareSendResponse = await breezSDKLiquid.instance!.prepareSendPayment(
  req: prepareSendRequest,
);

// If the fees are acceptable, continue to create the Send Payment
BigInt? sendFeesSat = prepareSendResponse.feesSat;
print("Fees: $sendFeesSat sats");
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore"># Set the Liquid BIP21 or Liquid address you wish to pay
destination = "&lt;Liquid BIP21 or address&gt;"
try:
    # If the destination is an address or an amountless BIP21 URI,
    # you must specify an asset amount
    usdt_asset_id = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    optional_amount = PayAmount.ASSET(usdt_asset_id, 1.50, False, None)
    prepare_response = sdk.prepare_send_payment(PrepareSendRequest(destination, optional_amount))

    # If the fees are acceptable, continue to create the Send Payment
    send_fees_sat = prepare_response.fees_sat
    logging.debug(f"Fees: {send_fees_sat} sats")
    return prepare_response
except Exception as error:
    logging.error(error)
    raise
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">// Set the Liquid BIP21 or Liquid address you wish to pay
destination := "&lt;Liquid BIP21 or address&gt;"
// If the destination is an address or an amountless BIP21 URI,
// you must specify an asset amount
usdtAssetId := "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
receiverAmount := float64(1.50)
estimateAssetFees := false
var optionalAmount breez_sdk_liquid.PayAmount = breez_sdk_liquid.PayAmountAsset{
    ToAsset:           usdtAssetId,
    ReceiverAmount:    receiverAmount,
    EstimateAssetFees: &amp;estimateAssetFees,
    FromAsset:         nil,
}

prepareRequest := breez_sdk_liquid.PrepareSendRequest{
    Destination: destination,
    Amount:      &amp;optionalAmount,
}
prepareResponse, err := sdk.PrepareSendPayment(prepareRequest)
if err != nil {
    log.Printf("Error: %#v", err)
    return
}

sendFeesSat := prepareResponse.FeesSat
log.Printf("Fees: %v sats", sendFeesSat)
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">// Set the Liquid BIP21 or address you wish to pay
var destination = "&lt;Liquid BIP21 or address&gt;";
try
{
    // If the destination is an address or an amountless BIP21 URI,
    // you must specify an asset amount
    var usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
    var optionalAmount = new PayAmount.Asset(usdtAssetId, 1.50, false, null);
    var prepareResponse = sdk.PrepareSendPayment(new PrepareSendRequest(destination, optionalAmount));

    // If the fees are acceptable, continue to create the Send Payment
    var sendFeesSat = prepareResponse.feesSat;
    Console.WriteLine($"Fees: {sendFeesSat} sats");
}
catch (Exception)
{
    // Handle error
}
</code></pre>
</section>
</custom-tabs>
<h3 id="exchanging-assets-for-bitcoin">
    <a class="header" href="#exchanging-assets-for-bitcoin">Exchanging assets for Bitcoin</a>
    <a class="tag" target="_blank" href="https://breez.github.io/breez-sdk-liquid/breez_sdk_liquid/sdk/struct.LiquidSdk.html#method.prepare_send_payment">API docs</a>
</h2>
<p>The <code>from_asset</code> field also allows for asset exchange, by means of self-payment. All you have to do is create a receive address and then pay to it. This is the same as swapping your asset balance (if sufficient) for the requested asset amount.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">// Create a Liquid address to receive to
let prepare_receive_res = sdk
    .prepare_receive_payment(&amp;PrepareReceiveRequest {
        payment_method: PaymentMethod::LiquidAddress,
        amount: None,
    })
    .await?;
let receive_res = sdk
    .receive_payment(&amp;ReceivePaymentRequest {
        prepare_response: prepare_receive_res,
        description: None,
        use_description_hash: None,
        payer_note: None,
    })
    .await?;

// Swap your funds to the address we've created
let usdt_asset_id =
    "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2".to_string();
let btc_asset_id =
    "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d".to_string();
let prepare_send_res = sdk
    .prepare_send_payment(&amp;PrepareSendRequest {
        destination: receive_res.destination,
        amount: Some(PayAmount::Asset {
            to_asset: usdt_asset_id,
            // We want to receive 1.5 USDt
            receiver_amount: 1.5,
            estimate_asset_fees: None,
            from_asset: Some(btc_asset_id),
        }),
    })
    .await?;
let payment = sdk
    .send_payment(&amp;SendPaymentRequest {
        prepare_response: prepare_send_res,
        use_asset_fees: None,
        payer_note: None,
    })
    .await?;</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">// Create a Liquid address to receive to
let prepareReceiveRes = try? sdk.prepareReceivePayment(req: PrepareReceiveRequest (
    paymentMethod: PaymentMethod.liquidAddress,
    amount: Optional.none
))
let receiveRes = try? sdk.receivePayment(req: ReceivePaymentRequest(
    prepareResponse: prepareReceiveRes!,
    description: Optional.none,
    useDescriptionHash: Optional.none,
    payerNote: Optional.none
))

// Swap your funds to the address we've created
let usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
let btcAssetId = "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d";

let prepareSendRes = try? sdk.prepareSendPayment(req: PrepareSendRequest (
    destination: receiveRes!.destination,
    amount: PayAmount.asset (
        toAsset: usdtAssetId,
        // We want to receive 1.5 USDt
        receiverAmount: 1.50,
        estimateAssetFees: Optional.none,
        fromAsset: btcAssetId
    )
))
let sendRes = try? sdk.sendPayment(req: SendPaymentRequest(
    prepareResponse: prepareSendRes!,
    useAssetFees: Optional.none
))
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">try {
    // Create a Liquid address to receive to
    val prepareReceiveRes = sdk.prepareReceivePayment(PrepareReceiveRequest(PaymentMethod.LIQUID_ADDRESS, null))
    val receiveRes = sdk.receivePayment(ReceivePaymentRequest(prepareReceiveRes, null, null, null))

    // Swap your funds to the address we've created
    val usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    val btcAssetId = "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d"
    val prepareSendRes = sdk.prepareSendPayment(
        PrepareSendRequest(
            receiveRes.destination,
            PayAmount.Asset(
                usdtAssetId,
                // We want to receive 1.5 USDt
                1.5,
                null,
                btcAssetId
            )
        )
    )
    val sendRes = sdk.sendPayment(SendPaymentRequest(prepareSendRes, null))
    val payment = sendRes.payment
} catch (e: Exception) {
    // handle error
}
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript">// Create a Liquid address to receive to
const prepareReceiveRes = await sdk.prepareReceivePayment({
  paymentMethod: 'liquidAddress',
  amount: undefined
})
const receiveRes = await sdk.receivePayment({
  prepareResponse: prepareReceiveRes,
  description: undefined,
  useDescriptionHash: undefined,
  payerNote: undefined
})

// Swap your funds to the address we've created
const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
const btcAssetId = '6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d'
const prepareSendRes = await sdk.prepareSendPayment({
  destination: receiveRes.destination,
  amount: {
    type: 'asset',
    toAsset: usdtAssetId,
    // We want to receive 1.5 USDt
    receiverAmount: 1.5,
    fromAsset: btcAssetId
  }
})
const sendRes = await sdk.sendPayment({
  prepareResponse: prepareSendRes,
  useAssetFees: undefined
})
const payment = sendRes.payment
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">// Create a Liquid address to receive to
const prepareReceiveRes = await prepareReceivePayment({
  paymentMethod: PaymentMethod.LIQUID_ADDRESS,
  amount: undefined
})
const receiveRes = await receivePayment({
  prepareResponse: prepareReceiveRes,
  description: undefined,
  useDescriptionHash: undefined,
  payerNote: undefined
})

// Swap your funds to the address we've created
const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
const btcAssetId = '6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d'
const prepareSendRes = await prepareSendPayment({
  destination: receiveRes.destination,
  amount: {
    type: PayAmountVariant.ASSET,
    toAsset: usdtAssetId,
    // We want to receive 1.5 USDt
    receiverAmount: 1.5,
    fromAsset: btcAssetId
  }
})
const sendRes = await sendPayment({
  prepareResponse: prepareSendRes,
  useAssetFees: undefined
})
const payment = sendRes.payment
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">// Create a Liquid address to receive to
PrepareReceiveRequest prepareReceiveRequest = PrepareReceiveRequest(
  paymentMethod: PaymentMethod.liquidAddress,
  amount: null,
);

PrepareReceiveResponse prepareReceiveRes = await breezSDKLiquid.instance!.prepareReceivePayment(
  req: prepareReceiveRequest,
);

ReceivePaymentRequest receivePaymentRequest = ReceivePaymentRequest(
  prepareResponse: prepareReceiveRes,
  description: null,
  useDescriptionHash: null,
  payerNote: null,
);

ReceivePaymentResponse receiveRes = await breezSDKLiquid.instance!.receivePayment(
  req: receivePaymentRequest,
);

// Swap your funds to the address we've created
String usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
String btcAssetId = "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d";
PrepareSendRequest prepareSendRequest = PrepareSendRequest(
  destination: receiveRes.destination,
  amount: PayAmount_Asset(
    toAsset: usdtAssetId,
    // We want to receive 1.5 USDt
    receiverAmount: 1.5,
    estimateAssetFees: null,
    fromAsset: btcAssetId,
  ),
);

PrepareSendResponse prepareSendRes = await breezSDKLiquid.instance!.prepareSendPayment(
  req: prepareSendRequest,
);

SendPaymentRequest sendPaymentRequest = SendPaymentRequest(
  prepareResponse: prepareSendRes,
  useAssetFees: null,
);

SendPaymentResponse sendRes = await breezSDKLiquid.instance!.sendPayment(
  req: sendPaymentRequest,
);
Payment payment = sendRes.payment;
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">try:
    # Create a Liquid address to receive to
    prepare_receive_res = sdk.prepare_receive_payment(
        PrepareReceiveRequest(
            payment_method=PaymentMethod.LIQUID_ADDRESS,
            amount=None,
        )
    )
    receive_res = sdk.receive_payment(
        ReceivePaymentRequest(
            prepare_receive_res,
            None,
            None,
            None,
        )
    )

    # Swap your funds to the address we've created
    usdt_asset_id = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    btc_asset_id = "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d"
    prepare_send_res = sdk.prepare_send_payment(
        PrepareSendRequest(
            receive_res.destination,
            # We want to receive 1.5 USDt
            PayAmount.ASSET(usdt_asset_id, 1.5, None, btc_asset_id),
        )
    )
    send_response = sdk.send_payment(
        SendPaymentRequest(
            prepare_send_res,
            None,
        )
    )
    payment = send_response.payment
except Exception as error:
    logging.error(error)
    raise
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">// Create a Liquid address to receive to
prepareReceiveReq := breez_sdk_liquid.PrepareReceiveRequest{
    PaymentMethod: breez_sdk_liquid.PaymentMethodLiquidAddress,
    Amount:        nil,
}
prepareReceiveRes, err := sdk.PrepareReceivePayment(prepareReceiveReq)
if err != nil {
    log.Printf("Error: %#v", err)
    return
}
receiveRes, err := sdk.ReceivePayment(breez_sdk_liquid.ReceivePaymentRequest{
    PrepareResponse:    prepareReceiveRes,
    Description:        nil,
    UseDescriptionHash: nil,
    PayerNote:          nil,
})
if err != nil {
    log.Printf("Error: %#v", err)
    return
}

// Swap your funds to the address we've created
usdtAssetId := "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
btcAssetId := "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d"
var amount breez_sdk_liquid.PayAmount = breez_sdk_liquid.PayAmountAsset{
    ToAsset: usdtAssetId,
    // We want to receive 1.5 USDt
    ReceiverAmount: 1.5,
    FromAsset:      &amp;btcAssetId,
}
prepareSendRes, err := sdk.PrepareSendPayment(breez_sdk_liquid.PrepareSendRequest{
    Destination: receiveRes.Destination,
    Amount:      &amp;amount,
})
if err != nil {
    log.Printf("Error: %#v", err)
    return
}
sendRes, err := sdk.SendPayment(breez_sdk_liquid.SendPaymentRequest{PrepareResponse: prepareSendRes})
if err != nil {
    log.Printf("Error: %#v", err)
    return
}
payment := sendRes.Payment
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">try
{
    // Create a Liquid address to receive to
    var prepareReceiveRes = sdk.PrepareReceivePayment(new PrepareReceiveRequest(PaymentMethod.LiquidAddress, null));
    var receiveRes = sdk.ReceivePayment(new ReceivePaymentRequest(prepareReceiveRes, null, null, null));

    // Swap your funds to the address we've created
    var usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
    var btcAssetId = "6f0279e9ed041c3d710a9f57d0c02928416460c4b722ae3457a11eec381c526d";
    var prepareSendRes = sdk.PrepareSendPayment(
        new PrepareSendRequest(
            receiveRes.destination,
            new PayAmount.Asset(
                usdtAssetId,
                // We want to receive 1.5 USDt
                1.5,
                null,
                btcAssetId
            )
        )
    );
    var sendRes = sdk.SendPayment(new SendPaymentRequest(prepareSendRes, null));
    var payment = sendRes.payment;
}
catch (Exception)
{
    // Handle error
}
</code></pre>
</section>
</custom-tabs>
<h2 id="paying-fees-with-a-non-bitcoin-asset">
    <a class="header" href="#sending-a-non-bitcoin-asset">Paying fees with a non-Bitcoin asset</a>
    <a class="tag" target="_blank" href="https://breez.github.io/breez-sdk-liquid/breez_sdk_liquid/sdk/struct.LiquidSdk.html#method.prepare_send_payment">API docs</a>
</h2>
<p>For some assets, like <a href="https://assets.blockstream.info/ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2.json">Tether USD</a>, you can pay the sending transaction fees with the asset.</p>
<div class="warning">
<h4 id="developer-note"><a class="header" href="#developer-note">Developer note</a></h4>
<p>When adding additional <a href="#adding-asset-metadata">asset metadata</a>, the optional <strong>fiat ID</strong> has to be set and the Payjoin provider has to support paying fees for this asset. When the asset is not supported, the <strong>asset fees</strong> in the prepare send payment response will be not set.</p>
</div>
<p>In the prepare send payment step, set the <strong>estimate asset fees</strong> param to <code>true</code> to validate and calculate the <strong>asset fees</strong>.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">let destination = "&lt;Liquid BIP21 or address&gt;".to_string();
let usdt_asset_id =
    "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2".to_string();
// Set the optional estimate asset fees param to true
let optional_amount = Some(PayAmount::Asset {
    to_asset: usdt_asset_id,
    from_asset: None,
    receiver_amount: 1.50,
    estimate_asset_fees: Some(true),
});
let prepare_response = sdk
    .prepare_send_payment(&amp;PrepareSendRequest {
        destination,
        amount: optional_amount,
    })
    .await?;

// If the asset fees are set, you can use these fees to pay to send the asset
let send_asset_fees = prepare_response.estimated_asset_fees;
info!("Estimated Fees: ~{:?}", send_asset_fees);

// If the asset fess are not set, you can use the sats fees to pay to send the asset
let send_fees_sat = prepare_response.fees_sat;
info!("Fees: {:?} sats", send_fees_sat);</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">let destination = "&lt;Liquid BIP21 or address&gt;"
let usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
// Set the optional estimate asset fees param to true
let optionalAmount = PayAmount.asset(
    toAsset: usdtAssetId,
    receiverAmount: 1.50,
    estimateAssetFees: true,
    fromAsset: Optional.none
)
let prepareResponse = try? sdk
    .prepareSendPayment(req: PrepareSendRequest (
        destination: destination,
        amount: optionalAmount
    ))

// If the asset fees are set, you can use these fees to pay to send the asset
let sendAssetFees = prepareResponse!.estimatedAssetFees
print("Estimated Fees: ~\(String(describing: sendAssetFees))")

// If the asset fess are not set, you can use the sats fees to pay to send the asset
let sendFeesSat = prepareResponse!.feesSat
print("Fees: \(sendFeesSat) sats")
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">val destination = "&lt;Liquid BIP21 or address&gt;"
try {
    val usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    // Set the optional estimate asset fees param to true
    val optionalAmount = PayAmount.Asset(usdtAssetId, 1.50, true, null)
    val prepareResponse = sdk.prepareSendPayment(PrepareSendRequest(destination, optionalAmount))

    // If the asset fees are set, you can use these fees to pay to send the asset
    val sendAssetFees = prepareResponse.estimatedAssetFees;
    // Log.v("Breez", "Estimated Fees: ~${sendAssetFees}")
    
    // If the asset fess are not set, you can use the sats fees to pay to send the asset
    val sendFeesSat = prepareResponse.feesSat;
    // Log.v("Breez", "Fees: ${sendFeesSat} sats")
} catch (e: Exception) {
    // handle error
}
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript">const destination = '&lt;Liquid BIP21 or address&gt;'
const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
// Set the optional estimate asset fees param to true
const optionalAmount: PayAmount = {
  type: 'asset',
  toAsset: usdtAssetId,
  receiverAmount: 1.50,
  estimateAssetFees: true
}

const prepareResponse = await sdk.prepareSendPayment({
  destination,
  amount: optionalAmount
})

// If the asset fees are set, you can use these fees to pay to send the asset
const sendAssetFees = prepareResponse.estimatedAssetFees
console.log(`Estimated Fees: ~${sendAssetFees}`)

// If the asset fess are not set, you can use the sats fees to pay to send the asset
const sendFeesSat = prepareResponse.feesSat
console.log(`Fees: ${sendFeesSat} sats`)
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">const destination = '&lt;Liquid BIP21 or address&gt;'
const usdtAssetId = 'ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2'
// Set the optional estimate asset fees param to true
const optionalAmount: PayAmount = {
  type: PayAmountVariant.ASSET,
  toAsset: usdtAssetId,
  receiverAmount: 1.50,
  estimateAssetFees: true
}

const prepareResponse = await prepareSendPayment({
  destination,
  amount: optionalAmount
})

// If the asset fees are set, you can use these fees to pay to send the asset
const sendAssetFees = prepareResponse.estimatedAssetFees
console.log(`Estimated Fees: ~${sendAssetFees}`)

// If the asset fess are not set, you can use the sats fees to pay to send the asset
const sendFeesSat = prepareResponse.feesSat
console.log(`Fees: ${sendFeesSat} sats`)
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">String destination = "&lt;Liquid BIP21 or address&gt;";
String usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
// Set the optional estimate asset fees param to true
PayAmount_Asset optionalAmount = PayAmount_Asset(
  toAsset: usdtAssetId,
  receiverAmount: 1.50,
  estimateAssetFees: true,
  fromAsset: null,
);
PrepareSendRequest prepareSendRequest = PrepareSendRequest(
  destination: destination,
  amount: optionalAmount,
);

PrepareSendResponse prepareSendResponse = await breezSDKLiquid.instance!.prepareSendPayment(
  req: prepareSendRequest,
);

// If the asset fees are set, you can use these fees to pay to send the asset
double? sendAssetFees = prepareSendResponse.estimatedAssetFees;
print("Estimated Fees: ~$sendAssetFees");

// If the asset fess are not set, you can use the sats fees to pay to send the asset
BigInt? sendFeesSat = prepareSendResponse.feesSat;
print("Fees: $sendFeesSat sats");
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">destination = "&lt;Liquid BIP21 or address&gt;"
try:
    usdt_asset_id = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
    # Set the optional estimate asset fees param to true
    optional_amount = PayAmount.ASSET(usdt_asset_id, 1.50, True, None)
    prepare_response = sdk.prepare_send_payment(PrepareSendRequest(destination, optional_amount))

    # If the asset fees are set, you can use these fees to pay to send the asset
    send_asset_fees = prepare_response.estimated_asset_fees
    logging.debug(f"Estimated Fees: ~{send_asset_fees}")

    # If the asset fess are not set, you can use the sats fees to pay to send the asset
    send_fees_sat = prepare_response.fees_sat
    logging.debug(f"Fees: {send_fees_sat} sats")
    return prepare_response
except Exception as error:
    logging.error(error)
    raise
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">destination := "&lt;Liquid BIP21 or address&gt;"
usdtAssetId := "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2"
receiverAmount := float64(1.50)
// Set the optional estimate asset fees param to true
estimateAssetFees := true
var optionalAmount breez_sdk_liquid.PayAmount = breez_sdk_liquid.PayAmountAsset{
    ToAsset:           usdtAssetId,
    ReceiverAmount:    receiverAmount,
    EstimateAssetFees: &amp;estimateAssetFees,
    FromAsset:         nil,
}

prepareRequest := breez_sdk_liquid.PrepareSendRequest{
    Destination: destination,
    Amount:      &amp;optionalAmount,
}
prepareResponse, err := sdk.PrepareSendPayment(prepareRequest)
if err != nil {
    log.Printf("Error: %#v", err)
    return
}

// If the asset fees are set, you can use these fees to pay to send the asset
sendAssetFees := prepareResponse.EstimatedAssetFees
log.Printf("Estimated Fees: ~%v", sendAssetFees)

// If the asset fess are not set, you can use the sats fees to pay to send the asset
sendFeesSat := prepareResponse.FeesSat
log.Printf("Fees: %v sats", sendFeesSat)
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">var destination = "&lt;Liquid BIP21 or address&gt;";
try
{
    var usdtAssetId = "ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2";
    // Set the optional estimate asset fees param to true
    var optionalAmount = new PayAmount.Asset(usdtAssetId, 1.50, true, null);
    var prepareResponse = sdk.PrepareSendPayment(new PrepareSendRequest(destination, optionalAmount));

    // If the asset fees are set, you can use these fees to pay to send the asset
    var sendAssetFees = prepareResponse.estimatedAssetFees;
    Console.WriteLine($"Estimated Fees: ~{sendAssetFees}");

    // If the asset fess are not set, you can use the sats fees to pay to send the asset
    var sendFeesSat = prepareResponse.feesSat;
    Console.WriteLine($"Fees: {sendFeesSat} sats");
}
catch (Exception)
{
    // Handle error
}
</code></pre>
</section>
</custom-tabs>
<p>If the <strong>asset fees</strong> are set in the response, then set the <strong>use asset fees</strong> to <code>true</code> to pay fees with the asset. You can still pay fees in satoshi if you set the <strong>use asset fees</strong> to <code>false</code> (default).</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">// Set the use asset fees param to true
let send_response = sdk
    .send_payment(&amp;SendPaymentRequest {
        prepare_response,
        payer_note: None,
        use_asset_fees: Some(true),
    })
    .await?;
let payment = send_response.payment;</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">// Set the use asset fees param to true
let sendResponse = try? sdk.sendPayment(req: SendPaymentRequest (
    prepareResponse: prepareResponse,
    useAssetFees: true
))
let payment = sendResponse!.payment
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">try {
    // Set the use asset fees param to true
    val sendResponse = sdk.sendPayment(SendPaymentRequest(prepareResponse, true))
    val payment = sendResponse.payment
} catch (e: Exception) {
    // handle error
}
</code></pre>
</section>
<div slot="title">Javascript</div>
<section>
<pre><code class="language-typescript">// Set the use asset fees param to true
const sendResponse = await sdk.sendPayment({
  prepareResponse,
  useAssetFees: true
})
const payment = sendResponse.payment
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">// Set the use asset fees param to true
const sendResponse = await sendPayment({
  prepareResponse,
  useAssetFees: true
})
const payment = sendResponse.payment
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">// Set the use asset fees param to true
SendPaymentRequest sendPaymentRequest = SendPaymentRequest(
  prepareResponse: prepareResponse,
  useAssetFees: true,
);

SendPaymentResponse sendPaymentResponse = await breezSDKLiquid.instance!.sendPayment(
  req: sendPaymentRequest,
);
Payment payment = sendPaymentResponse.payment;
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore">try:
    # Set the use asset fees param to true
    send_response = sdk.send_payment(SendPaymentRequest(prepare_response, True))
    payment = send_response.payment
except Exception as error:
    logging.error(error)
    raise
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">// Set the use asset fees param to true
useAssetFees := true
req := breez_sdk_liquid.SendPaymentRequest{
    PrepareResponse: prepareResponse,
    UseAssetFees:    &amp;useAssetFees,
}
if response, err := sdk.SendPayment(req); err == nil {
    payment := response.Payment
    log.Printf("Payment: %#v", payment)
}
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">try
{
    // Set the use asset fees param to true
    var sendRequest = new SendPaymentRequest(prepareResponse, true);
    var sendResponse = sdk.SendPayment(sendRequest);
    var payment = sendResponse.payment;
}
catch (Exception)
{
    // Handle error
}
</code></pre>
</section>
</custom-tabs>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../guide/self_signer.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../guide/production.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../guide/self_signer.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../guide/production.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../tabs.js"></script>



    </div>
    </body>
</html>
